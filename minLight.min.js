/**
 * @license minLight.js v0.2.0
 * A minimal lightbox that fades in/out a specified target
 * Copyright (c) 2013 timmy willison
 * Released under the MIT license
 * https://github.com/timmywil/jquery-minlight/blob/master/MIT-LICENSE.txt
 */
(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){"use strict";var e="__minlight",i=/[^A-Za-z\-\d]|(?:^\d)/g,n=/([a-z]+)([A-Z])/g,s=function(t,e,i){return e+("-"+i).toLowerCase()},a=Array.prototype.slice,o=function(i,a){var h=t.data(i,e);if(h)return h;if(!(this instanceof o))return new o(i,a);this.elem=i;var r=this.$elem=t(i);a=t.extend({},o.defaults,a),t.each(a,function(t){var e=r.attr("data-"+t.replace(n,s));void 0!==e&&(a[t]=e)}),this.content=a.content,this.options=a,this._setTarget(a.target),this.bind(),this.opened=!1,t.data(i,e,this)};return o.defaults={fadeTime:"fast",easing:"swing",container:"body",target:"",lightboxClass:"lightbox",maskClass:"lightbox-mask",href:"",imgWidth:"auto",imgHeight:"auto",closeOnMaskClick:!0,expandMask:!0,skeleton:"<div><a href='#' class='lightbox-close' data-bypass>X</a></div>"},o.prototype={constructor:o,_setTarget:function(e){var n,s=this.elem,a=this.$elem,o=this.options,h=t(e);h.length||(t.nodeName(s,"a")||void 0!==a.prop("tabIndex")?(this.content||(this.content=this.$img=t("<img>").attr({alt:a.attr("title"),src:o.href||s.href,width:o.imgWidth,height:o.imgHeight})),h=t(o.skeleton).data("_minGenerated",!0).prepend(this.content).appendTo(o.container),n=(e||h.selector).replace(i,""),n&&h.attr("id",n)):h=a),h.length||t.error("minLight - specified container is not on the page: "+e),h.addClass(o.lightboxClass).data("_minNumAttached",(h.data("_minNumAttached")||0)+1),this.$mask=h.prev("."+o.maskClass.split(" ")[0]),this.$mask.length||(this.$mask=t("<div>").addClass(o.maskClass).insertBefore(h)),this.$target=h,this.$close=h.find(".lightbox-close")},_expandMask:function(){var e=t(document).height(),i=t(window).height();this.$mask.height(e>i?e:i)},open:function(e){if(!this.opened){var i=this,n=this.options,s=n.fadeTime,a=n.easing,o=this.$target,h=-1*(o.width()/2);t.isFunction(n.willOpen)&&n.willOpen.call(this.$target[0],this),n.expandMask&&this._expandMask(),this.$mask.stop().fadeIn(s,a),o.css("marginLeft",h).stop().fadeIn(s,a,function(){i.opened=!0,t.isFunction(e)&&e.call(this,i),t.isFunction(n.onOpen)&&n.onOpen.call(this,i)})}},close:function(e){if(this.opened){var i=this,n=this.options,s=n.fadeTime,a=n.easing;t.isFunction(n.willClose)&&n.willClose.call(this.$target[0],this),this.opened=!1,this.$mask.stop().fadeOut(s,a),this.$target.stop().fadeOut(s,a,function(){t.isFunction(e)&&e.call(this,i),t.isFunction(n.onClose)&&n.onClose.call(this,i)})}},toggle:function(t){"none"===this.$target.css("display")?this.open(t):this.close(t)},bind:function(){var e=this.elem,i=this.$elem,n=this.$close,s=this;t.nodeName(e,"a")||t.nodeName(e,"button")?i.on("click.minlight",function(t){t.preventDefault(),s.toggle()}):void 0!==i.prop("tabIndex")&&i.on("focus.minlight",function(){s.open(function(){i.blur()})}),this.options.closeOnMaskClick&&(n=n.add(this.$mask)),n.bind("click.minlight",function(t){t.preventDefault(),s.close()})},unbind:function(){this.$elem.add(this.$mask).add(this.$close).unbind(".minlight")},_removeTarget:function(){var t=this.$target,e=t.data("_minNumAttached"),i=t.data("_minGenerated");(!e||1>=e)&&(i&&t.remove(),this.$mask.remove()),t.data("_minNumAttached",e&&e-1)},destroy:function(){this.unbind(),this._removeTarget(),this.$elem.removeData(e)},_setOptions:function(e){var i=this;t.each(e,function(e,n){switch(e){case"container":if(n=t(n),!n.length)return;n.append(i.$mask,i.$target);break;case"target":i._removeTarget(),i._setTarget(n);break;case"imgWidth":case"imgHeight":i.$img&&void 0===i.$elem.attr("data-"+e)&&i.$img[e.replace("img","").toLowerCase()](n)}switch(i.options[e]=n,e){case"fadeTime":case"easing":i.unbind(),i.bind()}})},option:function(e,i){var n;if(!e)return t.extend({},this.options);if("string"==typeof e){if(void 0===i)return this.options[e];n={},n[e]=i}else n=e;this._setOptions(n)},instance:function(){return this}},t.fn.minLight=function(i){var n,s,h,r;return"string"==typeof i?(r=[],s=a.call(arguments,1),this.each(function(){n=t.data(this,e),n?"_"!==i.charAt(0)&&"function"==typeof(h=n[i])&&void 0!==(h=h.apply(n,s))&&r.push(h):r.push(void 0)}),r.length?1===r.length?r[0]:r:this):this.each(function(){new o(this,i)})},o});